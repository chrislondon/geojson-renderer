<html>
  <head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"/>
    <style>
              
#properties-view {
  position: absolute;
  margin: 10px;
  padding: 5px;
  box-sizing: border-box;
  transition: all .4s ease-in-out;
  -moz-transition: all .4s ease-in-out;
  -webkit-transition: all .4s ease-in-out;
  background-color:#E7E2DD;
}

.hidden {
  visibility: hidden;
  opacity: 0;
}

.active {
  opacity: 1;

  visibility: visible
}

.button-blue {
  background-color: #1D71B8;
  border-color: #1D71B8;
}


            </style>
    <title>geojson-renderer</title>
  </head>
  <body>
    <div id="properties-view" class="hidden">
      <div id="feature-header"></div>
      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody id="properties-table">
                </tbody>
      </table>
      <button class="button button-blue" id="close-button">Close</button>
    </div>
    <svg version="1.1" height="800" width="1200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <g class="geojson-tiles">
        <image height="256px" width="256px" y="-187" x="-64" xlink:href="http://b.tile.openstreetmap.org/16/35202/21493.png"/>
        <image height="256px" width="256px" y="69" x="-64" xlink:href="http://c.tile.openstreetmap.org/16/35202/21494.png"/>
        <image height="256px" width="256px" y="325" x="-64" xlink:href="http://a.tile.openstreetmap.org/16/35202/21495.png"/>
        <image height="256px" width="256px" y="581" x="-64" xlink:href="http://b.tile.openstreetmap.org/16/35202/21496.png"/>
        <image height="256px" width="256px" y="-187" x="192" xlink:href="http://c.tile.openstreetmap.org/16/35203/21493.png"/>
        <image height="256px" width="256px" y="69" x="192" xlink:href="http://a.tile.openstreetmap.org/16/35203/21494.png"/>
        <image height="256px" width="256px" y="325" x="192" xlink:href="http://b.tile.openstreetmap.org/16/35203/21495.png"/>
        <image height="256px" width="256px" y="581" x="192" xlink:href="http://c.tile.openstreetmap.org/16/35203/21496.png"/>
        <image height="256px" width="256px" y="-187" x="448" xlink:href="http://a.tile.openstreetmap.org/16/35204/21493.png"/>
        <image height="256px" width="256px" y="69" x="448" xlink:href="http://b.tile.openstreetmap.org/16/35204/21494.png"/>
        <image height="256px" width="256px" y="325" x="448" xlink:href="http://c.tile.openstreetmap.org/16/35204/21495.png"/>
        <image height="256px" width="256px" y="581" x="448" xlink:href="http://a.tile.openstreetmap.org/16/35204/21496.png"/>
        <image height="256px" width="256px" y="-187" x="704" xlink:href="http://b.tile.openstreetmap.org/16/35205/21493.png"/>
        <image height="256px" width="256px" y="69" x="704" xlink:href="http://c.tile.openstreetmap.org/16/35205/21494.png"/>
        <image height="256px" width="256px" y="325" x="704" xlink:href="http://a.tile.openstreetmap.org/16/35205/21495.png"/>
        <image height="256px" width="256px" y="581" x="704" xlink:href="http://b.tile.openstreetmap.org/16/35205/21496.png"/>
        <image height="256px" width="256px" y="-187" x="960" xlink:href="http://c.tile.openstreetmap.org/16/35206/21493.png"/>
        <image height="256px" width="256px" y="69" x="960" xlink:href="http://a.tile.openstreetmap.org/16/35206/21494.png"/>
        <image height="256px" width="256px" y="325" x="960" xlink:href="http://b.tile.openstreetmap.org/16/35206/21495.png"/>
        <image height="256px" width="256px" y="581" x="960" xlink:href="http://c.tile.openstreetmap.org/16/35206/21496.png"/>
      </g>
      <g class="geojson-features">
        <g data-properties="{&quot;source&quot;:&quot;handcrafted&quot;,&quot;id&quot;:42,&quot;title&quot;:&quot;Berlin Walk&quot;,&quot;description&quot;:&quot;Represents GPS data collected during a hypothetical walk through Berlin.&quot;,&quot;stroke&quot;:&quot;green&quot;}" fill-opacity="0.6" fill="#555555" stroke-width="3" stroke="green" class="geojson-feature">
          <title>
      Berlin Walk
    </title>
          <desc>
      Represents GPS data collected during a hypothetical walk through Berlin.
    </desc>
          <polyline fill="None" points="883.8508088905364,744.4575860798359 860.5491199996322,729.1440897034481 809.2854044456035,729.1440897034481 716.0786488894373,721.4873153837398 641.5132444445044,752.1143081365153 576.2685155551881,583.6623986084014 562.2875022236258,476.4613385098055 511.0237866677344,269.7067925045267 445.77905777841806,116.54708650894463 366.5533155556768,47.62294440995902 315.2895999997854,62.93954243697226"/>
        </g>
      </g>
    </svg>
    <script>
            (function () {
  const toArray = (htmlCollection) =>
    (htmlCollection);

  const features = Array.prototype.slice.call(
    document.getElementsByClassName("geojson-feature")
  );

  document.getElementById("close-button").addEventListener("click", () => {
   var propertiesView = document.getElementById("properties-view")
   propertiesView.classList.remove("active")
   propertiesView.classList.add("hidden")
  }
  );

  features.forEach((feature) =>
    feature.addEventListener("click", () => {
      var properties = JSON.parse(feature.getAttribute("data-properties"));
      console.log(properties);
      var propertiesView = document.getElementById("properties-view");
      var propertiesContent = document.getElementById("properties-table");
      propertiesContent.innerHTML = Object.entries(properties).map((entry) =>
       "<tr><td>" + entry[0] + "</td><td>" + entry[1] + "</td></tr>"
      ).join("\n");
      var featureHeader = document.getElementById("feature-header");

      var title = ""
      if (properties.title) {
        title = "<h1>"+properties.title+"</h1>\n"
      } else if (properties.name) {
       title = "<h1>"+properties.name+"</h1>\n"
    }

      featureHeader.innerHTML = title

      propertiesView.classList.add("active")
      propertiesView.classList.remove("hidden")

    })
  );
})();
          </script>
  </body>
</html>
